{
  "name": "torch_starter-cuda (CUDA 12.4, uv, Py3.12)",
  "build": {
    "dockerfile": "Dockerfile",
    "context": "..",
    "options": [
      "--build-arg",
      "BUILDKIT_INLINE_CACHE=1",
      "--build-arg",
      "PYTHON_VERSION=3.12",
      "--build-arg",
      "CUDA_VERSION=12.4"
    ]
  },
  "runArgs": [
    "--gpus",
    "all",
    "--runtime=nvidia",
    "--shm-size=4g",
    "--ulimit",
    "memlock=-1",
    "--ulimit",
    "stack=67108864",
    "--cap-add",
    "SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined"
  ],
  "containerUser": "vscode",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  "containerEnv": {
    "HF_HOME": "/home/vscode/.cache/huggingface",
    "TRANSFORMERS_CACHE": "/home/vscode/.cache/huggingface",
    "TORCH_HOME": "/home/vscode/.cache/torch",
    "KAGGLE_CONFIG_DIR": "/home/vscode/.kaggle",
    "UV_LINK_MODE": "copy",
    "UV_COMPILE_BYTECODE": "1",
    "UV_CONCURRENT_DOWNLOADS": "10",
    "PYTHONDONTWRITEBYTECODE": "1",
    "PYTHONUNBUFFERED": "1",
    "CUDA_VERSION": "12.4",
    "CUDA_VISIBLE_DEVICES": "all",
    "NVIDIA_VISIBLE_DEVICES": "all",
    "NVIDIA_DRIVER_CAPABILITIES": "compute,utility",
    "NVIDIA_REQUIRE_CUDA": "cuda>=12.4",
    "TORCH_CUDA_ARCH_LIST": "7.0;7.5;8.0;8.6;8.9;9.0",
    "FORCE_CUDA": "1",
    "TORCH_USE_CUDA_DSA": "1"
  },
  "mounts": [
    {
      "source": "torch-starter-hf-cache",
      "target": "/home/vscode/.cache/huggingface",
      "type": "volume"
    },
    {
      "source": "torch-starter-torch-cache",
      "target": "/home/vscode/.cache/torch",
      "type": "volume"
    },
    {
      "source": "torch-starter-kaggle-cache",
      "target": "/home/vscode/.kaggle",
      "type": "volume"
    },
    {
      "source": "torch-starter-data",
      "target": "/workspaces/${localWorkspaceFolderBasename}/data",
      "type": "volume"
    },
    {
      "source": "torch-starter-uv-cache",
      "target": "/home/vscode/.cache/uv",
      "type": "volume"
    },
    {
      "source": "torch-starter-pip-cache",
      "target": "/home/vscode/.cache/pip",
      "type": "volume"
    }
  ],
  "initializeCommand": [
    "bash",
    "-c",
    "docker volume create torch-starter-hf-cache 2>/dev/null || true; docker volume create torch-starter-torch-cache 2>/dev/null || true; docker volume create torch-starter-kaggle-cache 2>/dev/null || true; docker volume create torch-starter-data 2>/dev/null || true; docker volume create torch-starter-uv-cache 2>/dev/null || true; docker volume create torch-starter-pip-cache 2>/dev/null || true"
  ],
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "configureZshAsDefaultShell": true,
      "upgradePackages": false
    },
    "ghcr.io/devcontainers/features/git:1": {
      "ppa": false,
      "version": "os-provided"
    }
  },
  "postCreateCommand": {
    "activate-env": "bash -c 'source .venv/bin/activate && python -c \"import sys; print(f\\\"üêç Python {sys.version}\\\")\" && python -c \"import torch; print(f\\\"üî• PyTorch {torch.__version__}\\\"); print(f\\\"üöÄ CUDA Available: {torch.cuda.is_available()}\\\"); print(f\\\"üì± CUDA Devices: {torch.cuda.device_count()}\\\") if torch.cuda.is_available() else print(\\\"‚ö†Ô∏è  CUDA Not Available\\\")\"'",
    "setup-git": "git config --global --add safe.directory /workspaces/${localWorkspaceFolderBasename}",
    "verify-cuda": "bash -c 'if command -v nvidia-smi >/dev/null 2>&1; then echo \"üñ•Ô∏è  GPU Information:\"; nvidia-smi --query-gpu=name,memory.total,compute_cap --format=csv,noheader; else echo \"‚ö†Ô∏è  nvidia-smi not available\"; fi'"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-toolsai.jupyter",
        "charliermarsh.ruff",
        "eamodio.gitlens",
        "EditorConfig.EditorConfig",
        "ms-azuretools.vscode-docker",
        "RooVeterinaryInc.roo-cline",
        "mechatroner.rainbow-csv",
        "gaogaotiantian.viztracer-vscode",
        "bierner.markdown-mermaid",
        "ms-toolsai.vscode-ai-remote",
        "GitHub.copilot"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/workspaces/${localWorkspaceFolderBasename}/.venv/bin/python",
        "python.terminal.activateEnvironment": true,
        "python.analysis.typeCheckingMode": "basic",
        "python.analysis.autoImportCompletions": true,
        "python.analysis.indexing": true,
        "python.analysis.packageIndexDepths": [
          {
            "name": "sklearn",
            "depth": 2
          },
          {
            "name": "torch",
            "depth": 3
          },
          {
            "name": "transformers",
            "depth": 2
          }
        ],
        "python.testing.pytestEnabled": true,
        "python.testing.unittestEnabled": false,
        "python.testing.pytestArgs": [
          "tests"
        ],
        "ruff.enable": true,
        "ruff.organizeImports": true,
        "ruff.serverEnabled": true,
        "ruff.lint.enable": true,
        "ruff.format.enable": true,
        "files.watcherExclude": {
          "**/.venv/**": true,
          "**/__pycache__/**": true,
          "**/.mypy_cache/**": true,
          "**/.ruff_cache/**": true,
          "**/.pytest_cache/**": true,
          "**/node_modules/**": true,
          "**/.cache/**": true
        },
        "search.exclude": {
          "**/.venv": true,
          "**/__pycache__": true,
          "**/.mypy_cache": true,
          "**/.ruff_cache": true,
          "**/.cache": true
        },
        "files.exclude": {
          "**/.venv": false,
          "**/__pycache__": true,
          "**/.mypy_cache": true,
          "**/.ruff_cache": true,
          "**/.pytest_cache": true
        },
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.shellIntegration.enabled": true,
        "terminal.integrated.env.linux": {
          "CUDA_VISIBLE_DEVICES": "all"
        },
        "jupyter.askForKernelRestart": false,
        "jupyter.defaultKernel": "torch_starter-3.12",
        "notebook.experimental.openGettingStarted": false,
        "notebook.kernelProviderAssociations": [
          {
            "viewType": "jupyter-notebook",
            "kernelspec": "torch_starter-3.12"
          }
        ],
        "git.enableSmartCommit": true,
        "git.autofetch": true,
        "extensions.autoUpdate": false,
        "telemetry.telemetryLevel": "off",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.organizeImports.ruff": "explicit",
          "source.fixAll.ruff": "explicit"
        },
        "editor.rulers": [
          88,
          100
        ],
        "workbench.colorTheme": "Default Dark+",
        "workbench.preferredDarkColorTheme": "Default Dark+",
        "workbench.preferredLightColorTheme": "Default Light+",
        "[python]": {
          "editor.defaultFormatter": "charliermarsh.ruff",
          "editor.codeActionsOnSave": {
            "source.organizeImports": "explicit",
            "source.fixAll": "explicit"
          },
          "editor.formatOnSave": true
        },
        "[dockerfile]": {
          "editor.defaultFormatter": "ms-azuretools.vscode-docker"
        },
        "[json]": {
          "editor.defaultFormatter": "vscode.json-language-features"
        },
        "[jsonc]": {
          "editor.defaultFormatter": "vscode.json-language-features"
        }
      }
    }
  },
  "remoteEnv": {
    "ROO_CONFIG_PATH": "/workspaces/${localWorkspaceFolderBasename}/.roo/roo.json",
    "MCP_SERVERS_CONFIG": "/workspaces/${localWorkspaceFolderBasename}/.mcp/servers.json"
  },
  "shutdownAction": "stopContainer",
  "hostRequirements": {
    "gpu": "optional",
    "memory": "12gb",
    "cpus": 8
  },
  "capAdd": [
    "SYS_PTRACE"
  ],
  "securityOpt": [
    "seccomp=unconfined"
  ],
  "onCreateCommand": "echo 'üèóÔ∏è  Container created successfully'",
  "updateContentCommand": "echo 'üîÑ Content updated'",
  "postStartCommand": "echo 'üöÄ Development environment ready!'",
  "waitFor": "postCreateCommand"
}